export const ArrayProxy=function(e){return new Proxy(e,{set(e,t,n,r){if(t in e)Reflect.set(e,t,n,r);else for(let r of e)r[t]=n},get(e,t,n){if(t in e){let n=e[t];return"function"==typeof n?n.bind(e):n}{let n=[],r=e[0];if(r&&"function"==typeof r[t])return(...n)=>{for(let r=0;r<e.length;r++){let o=e[r];"function"==typeof n[0]?o[t](...n[0](r,...n.slice(1),o)):o[t](...n)}};for(let r of e){let o=r[t];n.push("function"==typeof o?o.bind(e):o)}return ArrayProxy(n)}}})};export const ErgoElement=function(e,{prefix:t="$"}={}){return"string"==typeof e&&document.querySelector(e),new Proxy((function(t){let n=e.querySelectorAll(t);return 1==n.length?ErgoElement(n[0]):0===n.length?null:ArrayProxy(n)}),{get(n,r,o){let l=e[r];return"self"===r?e:"function"==typeof l?l.bind(e):r in e?e[r]:(r&&r.startsWith(t)&&(r=r.slice(t.length)),n(r))},apply:(e,t,n)=>e.apply(t,n)})};